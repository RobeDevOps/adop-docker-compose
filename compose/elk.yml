# set CUSTOM_NETWORK_NAME to the name of the custom Docker network

elasticsearch:
  container_name: elasticsearch
  restart: always
  image: docker.elastic.co/elasticsearch/elasticsearch:6.4.3
  net: ${CUSTOM_NETWORK_NAME}
  environment:
    - cluster.name=docker-cluster
    - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
  ports:
    - "9200:9200"
  volumes:
    - es_data:/usr/share/elasticsearch/data

logstash:
  container_name: logstash
  restart: always
  image: robedevops/adop-logstash:1.0.3
  net: ${CUSTOM_NETWORK_NAME}
  environment:
    - "constraint:tier==public"
    - LS_HEAP_SIZE=1024m
    - ELASTICSEARCH_URL=http://elasticsearch:9200
  ports:
    - "12201:12201/udp"
    - "25826:25826/udp"
    - "5000:5000/tcp"
    - "5044:5044/tcp"
    - "5045:5045/tcp"
    - "5046:5046/tcp"
    - "5055:5055/tcp"
    - "5065:5065/tcp"

kibana:
  container_name: kibana
  restart: always
  image: docker.elastic.co/kibana/kibana:6.4.3
  net: ${CUSTOM_NETWORK_NAME}
  command: kibana
  environment:
    - ELASTICSEARCH_URL=http://elasticsearch:9200
  ports:
    - "5601:5601"
